
{% extends "base.html" %}

{% block title %}Request Tracker - Stock Management{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- Header -->
    <div class="md:flex md:items-center md:justify-between">
        <div class="flex-1 min-w-0">
            <h2 class="text-2xl font-bold leading-7 text-white sm:text-3xl sm:truncate">
                Request Tracker
            </h2>
            <p class="mt-1 text-sm text-gray-400">
                Track any stock request using its ID or request number
            </p>
        </div>
    </div>

    <!-- Search Form -->
    <div class="bg-gray-800 shadow rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <form method="POST" action="{{ url_for('stock_issue.search_request') }}" class="space-y-4">
                <div>
                    <label for="request_id" class="block text-sm font-medium text-gray-300 mb-2">
                        Request ID or Request Number
                    </label>
                    <div class="flex space-x-3">
                        <input type="text" 
                               id="request_id" 
                               name="request_id" 
                               class="flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500" 
                               placeholder="Enter Request ID (e.g., 1, 2) or Request Number (e.g., REQ20240811001)"
                               required>
                        <button type="submit" 
                                class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <i class="fas fa-search mr-2"></i>Track Request
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Instructions -->
    <div class="bg-gray-800 border border-gray-700 rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-lg font-medium text-white mb-4">How to use Request Tracker</h3>
            <div class="space-y-3 text-sm text-gray-300">
                <div class="flex items-start">
                    <i class="fas fa-info-circle text-blue-400 mt-0.5 mr-3"></i>
                    <div>
                        <strong>Request Number:</strong> Enter the full request number (e.g., REQ20240811001)
                    </div>
                </div>
                <div class="flex items-start">
                    <i class="fas fa-hashtag text-blue-400 mt-0.5 mr-3"></i>
                    <div>
                        <strong>Request ID:</strong> Enter the numeric ID (e.g., 1, 2, 3)
                    </div>
                </div>
                <div class="flex items-start">
                    <i class="fas fa-eye text-green-400 mt-0.5 mr-3"></i>
                    <div>
                        <strong>Access:</strong> You can view requests you created or (for HODs) requests from your department
                    </div>
                </div>
                <div class="flex items-start">
                    <i class="fas fa-clock text-yellow-400 mt-0.5 mr-3"></i>
                    <div>
                        <strong>Real-time:</strong> Request status is updated in real-time as it moves through the approval process
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Links -->
    <div class="bg-gray-800 rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-lg font-medium text-white mb-4">Quick Actions</h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                <a href="{{ url_for('stock_issue.my_requests') }}" 
                   class="flex items-center p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors">
                    <i class="fas fa-list text-blue-400 mr-3"></i>
                    <div>
                        <div class="text-sm font-medium text-white">My Requests</div>
                        <div class="text-xs text-gray-400">View all your requests</div>
                    </div>
                </a>
                <a href="{{ url_for('stock_issue.create_request') }}" 
                   class="flex items-center p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors">
                    <i class="fas fa-plus text-green-400 mr-3"></i>
                    <div>
                        <div class="text-sm font-medium text-white">New Request</div>
                        <div class="text-xs text-gray-400">Create new stock request</div>
                    </div>
                </a>
                {% if current_user.role.value == 'hod' %}
                <a href="{{ url_for('approvals.pending') }}" 
                   class="flex items-center p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors">
                    <i class="fas fa-check-circle text-yellow-400 mr-3"></i>
                    <div>
                        <div class="text-sm font-medium text-white">Pending Approvals</div>
                        <div class="text-xs text-gray-400">Review pending requests</div>
                    </div>
                </a>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Back Button -->
    <div class="flex justify-start">
        <a href="{{ url_for('main.dashboard') }}" 
           class="inline-flex items-center px-4 py-2 border border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-300 bg-gray-700 hover:bg-gray-600 focus:outline-none">
            <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
        </a>
    </div>
</div>

<script>
// Auto-focus on the input field when page loads
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('request_id').focus();
});

// Handle form submission with Enter key
document.getElementById('request_id').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        e.preventDefault();
        this.closest('form').submit();
    }
});
</script>

{% endblock %}
